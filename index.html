<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Type samples index</title>
<meta name="description" content="Lists open issues in i18n Activity github repositories." />
<script type="text/javascript">
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'i18n-wg/repostatus/'+'/'; // the path to this file, not including /International or the file name
f.filename = 'reviews'; // the file name WITHOUT extensions
f.authors = 'Richard Ishida, W3C'; // author(s) and affiliations
f.previousauthors = ''; // as above
f.modifiers = ''; // people making substantive changes, and their affiliation
f.searchString = 'reviews-openissues'; // blog search string - usually the filename without extensions
f.firstPubDate = '2106-03-16'; // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2106-07-15', time:'07:18'}  // date and time of latest substantive changes to this document
f.status = 'notreviewed';  // should be one of draft, review, published, notreviewed or obsolete
f.path = 'https://w3c.github.io/i18n-drafts/' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2106-07-15', time:'07:18'} // date and time of latest edits to this document/translation
f.contributors = ''; // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!

// TRANSLATORS should fill in these assignments:
f.translators = 'xxxNAME, ORG'; // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes

f.breadcrumb = 'characters';

f.additionalLinks = ''
</script>
<script type="text/javascript" src="index-data/translations.js"> </script>
<script type="text/javascript" src="https://w3c.github.io/i18n-drafts/javascript/doc-structure/article-dt.js"> </script>
<script type="text/javascript" src="https://w3c.github.io/i18n-drafts/javascript/boilerplate-text/boilerplate-en.js"></script><!--TRANSLATORS must change -en to the subtag for their language!-->
<script type="text/javascript" src="https://w3c.github.io/i18n-drafts/javascript/doc-structure/sitepage.js"> </script>
<script type="text/javascript" src="https://w3c.github.io/i18n-drafts/javascript/articletoc-html5.js"></script>
<script type="text/javascript" src="index-data/label-list.js"></script>
<link rel="stylesheet" href="https://w3c.github.io/i18n-drafts/style/sitepage-2016.css" type="text/css" />
<link rel="stylesheet" href="index-data/local.css" type="text/css" />
<link rel="copyright" href="#copyright"/>
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<style>
select { font-size: 1em; font-family: Gotham, "Helvetica Neue", Helvetica, Arial, sans-serif; border: 0; width: 100%; }
</style>
<script>
// Note that the code is designed to pull a maximum of 200 issues - for more, change maxpages
// It will only display issues with labels that correspond to those defined in the labels variable
// this means that if a new label is added, this code needs to be changed
// we could probably fix this by ignoring pending, close and track labels and constituting the list of labels as needed
// but we'd have to be careful to ignore other labels that are added other than spec labels
 


// Define the repository owner
var owner = 'w3c';

var labelsKeys = Object.keys(labels)
var labelsLength = labelsKeys.length
var debug = false

var issues = []
var maxpages = 2
var scriptFilter = ''
var mediaFilter = ''

</script>
</head>

<body>
<header>
  <nav id="mainNavigation"></nav>
  <script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script> 
</header>
<div class="content">
<h1> Type samples</h1>
<section id="sidebarExtras">
<form onChange="displayRepo(getFilter())">
  <h2 class="notoc">Select a feature</h2>
  <select id="features" size="10">
    <option value="abbreviation" type="radio" name="filter">Abbreviation</option>
    <option value="bidi-text" type="radio" name="filter">Bidirectional text</option>
    <option value="counter-styles" type="radio" name="filter">Counter styles</option>
    <option value="emphasis" type="radio" name="filter">Emphasis</option>
    <option value="font-style" type="radio" name="filter">Font style</option>
    <option value="fonts" type="radio" name="filter">Fonts</option>
    <option value="glyphs-diacritics" type="radio" name="filter">Glyphs &amp; diacritics</option>
    <option value="hyphenation" type="radio" name="filter">Hyphenation</option>
    <option value="initial-letter" type="radio" name="filter">Initial letter</option>
    <option value="justification" type="radio" name="filter">Justification</option>
    <option value="notes-footnotes" type="radio" name="filter">Notes, footnotes...</option>
    <option value="numbers" type="radio" name="filter">Numbers</option>
    <option value="punctuation" type="radio" name="filter">Punctuation</option>
    <option value="ruby" type="radio" name="filter">Ruby</option>
    <option value="quotations" type="radio" name="filter">Quotations</option>
    <option value="text-decoration" type="radio" name="filter">Text-decoration</option>
    <option value="vertical-text" type="radio" name="filter">Vertical text</option>
  </select>
  <h2 class="notoc">Filter by script</h2>
  <select id="scripts" size="10">
    <option value="" type="radio" name="filter" selected>All</option>
    <option value="arabic" type="radio" name="filter">Arabic</option>
    <option value="chinese" type="radio" name="filter">Chinese</option>
    <option value="cyrillic" type="radio" name="filter">Cyrillic</option>
    <option value="ethiopic" type="radio" name="filter">Ethiopic</option>
    <option value="greek" type="radio" name="filter">Greek</option>
    <option value="hebrew" type="radio" name="filter">Hebrew</option>
    <option value="japanese" type="radio" name="filter">Japanese</option>
    <option value="mongolian" type="radio" name="filter">Mongolian</option>
    <option value="se-asia" type="radio" name="filter">South East Asia</option>
    <option value="south-asia" type="radio" name="filter">South Asia</option>
    <option value="thai" type="radio" name="filter">Thai</option>
    <option value="tibetan" type="radio" name="filter">Tibetan</option>
  </select>
  <h2 class="notoc">Filter by medium</h2>
  <select id="media" size="10">
    <option value="" type="radio" name="filter" selected>All</option>
    <option value="book" type="radio" name="filter">Book</option>
    <option value="inscription" type="radio" name="filter">Inscription</option>
    <option value="magazine" type="radio" name="filter">Magazine</option>
    <option value="mockup" type="radio" name="filter">Mockup</option>
    <option value="newsprint" type="radio" name="filter">Newsprint</option>
    <option value="printedmatter" type="radio" name="filter">Printed matter</option>
    <option value="signage" type="radio" name="filter">Signage</option>
    <option value="webpage" type="radio" name="filter">Webpage</option>
  </select>
</form>
</section>
<section>
  <p>This page lists pictures in the type-samples github repository.  You can narrow your search by selecting a script or medium. Select the feature for which you want to retrieve pictures using the selection control. The most recently added or changed items appear at the top of the list. When the thumbnails appear, click on an image to see the full entry. <span id="total"></span></p>
</section>
<section id="rawdata">
</section>


<script>
			var totals=0
			var counter=maxpages
		
		
			function getFilter () {
				scriptFilter = document.getElementById('scripts').value
				mediaFilter = document.getElementById('media').value
				
				return document.getElementById('features').value
				}
						
			function getAllData () {
				for (var p=1;p<maxpages+1;p++) fetchIssues(p)
				var timer = setInterval(function() {
					if (counter === 0) {
						clearInterval(timer)
						if (debug) console.log('finished')
						
						// group issues by label, adding to the labels array
						for (var i=0; i<issues.length; i++) {
							if (issues[i].labels) {
								for (var l=0;l<issues[i].labels.length;l++) {
									if (labels[issues[i].labels[l].name]) labels[issues[i].labels[l].name].push(issues[i])
									}
								}
							}
						
						checkDates()
						}
					else if (debug) console.log(counter)
					}, 50)
				}

	
			// Grab and present the issue list from GitHub
			function fetchIssues(page) {
				var request = new XMLHttpRequest();
				request.open('get','https://api.github.com/repos/w3c/type-samples/issues?per_page=100&page='+page)
				request.onload = function () {
						var temp = JSON.parse(request.responseText)
						for (var i=0;i<temp.length;i++) {
							issues.push(temp[i])
							}
					totals += issues.length;
					if (debug) console.log(issues.length,totals,page, counter)
					counter--
					}
				request.send();
				}
				
			
			function checkDates () {
				// figure out the most-recent-first order for displaying labels
				dates = {}
				var instance = 0 // this is used to distinguish issues with the same updated_at timestamp
				for (label in labels) {
					if (labels[label].length > 0) {
						// find the newest date
						var newest = labels[label][0]['updated_at']
						for (x=0;x<labels[label].length;x++) {
							if (labels[label][x]['updated_at'] > newest) newest = labels[label][x]['updated_at']
							}
						dates[newest+instance] = label
						instance++
						}
					}
				var keys = Object.keys(dates)
				keys.sort().reverse()
				
				// display the labels in that order
				//for (var i=0;i<keys.length;i++) {
				//	var labelname = dates[keys[i]]
				//	displayRepo(labelname)
				//	}
				}
									
			// Display repository information
			function displayRepo(label) {
				// Add a container to put the repository info and issues in
				var table, tr, td, a, updated, toc, span
				var labelSection = document.createElement('section');
				
				// Add a heading
				var labelLink = document.createElement('a');
				labelLink.setAttribute('href', '#'+label);
				labelLink.innerHTML = label;
				var labelHeader = document.createElement('h2')
				labelHeader.id = label
				labelHeader.appendChild(labelLink);
				labelSection.appendChild(labelHeader);
				
				div = document.createElement('div')
				div.className = 'sampleContainer'
				
				// figure out the most-recently-updated order for displaying issues
				var idates = {}
				var instance = 0 // this is used to distinguish issues with the same updated_at timestamp
				for (issue in labels[label]) {
					idates[labels[label][issue]['updated_at']+instance] = labels[label][issue]
					instance++
					}
				var ikeys = Object.keys(idates)
				ikeys.sort().reverse()
				
				// ikeys is a sorted set of keys for idates for a given label
				// idates is an object containing issue records for a given label
				
				// display issues in order of most recently updated
				for (var i=0;i<ikeys.length;i++) {
					var issueData = idates[ikeys[i]]

					// get a list of labels for this item
					var itemLabelList = ''
					for (j=0;j<issueData['labels'].length;j++) itemLabelList += issueData['labels'][j].name + ' '
										
					// abort if the other selected filters are not found
					if (scriptFilter && ! itemLabelList.match(scriptFilter)) continue
					if (mediaFilter && ! itemLabelList.match(mediaFilter)) continue
					
					// get the image url
					var url = issueData['body'].match(/https:\/\/cloud.githubusercontent.com\/assets\/([^\)]+)/)
					if (url) {
						fig = document.createElement('div')
						fig.className = 'fig'
						
						a = document.createElement('a')
						a.href = issueData['html_url']
						a.target = '_blank'
						img = document.createElement('img')
						img.src = url[0]
						img.title = issueData['title']+' ('+issueData['number']+')'
						img.alt = img.title
						img.className = 'sample'
						a.appendChild(img)
						
						fig.appendChild(a)
						
						// get descriptions
						//console.log(/tag: [^$]+/)
						var desc = issueData['body'].match(/tag: [^\n]+/g)
						if (desc) {
							descList = document.createElement('div')
							descList.className = 'descList'
							p = document.createElement('p')
							p.className = 'sampleSummary'
							p.appendChild(document.createTextNode(issueData['title']))
							descList.appendChild(p)
							figcap = document.createElement('p')
							figcap.appendChild(document.createTextNode(desc[0].replace(/tag:[\s]+/,'').replace(' ',' \u00A0\u00A0\u00A0 ')))
							for (k=1;k<desc.length;k++) {
								p = document.createElement('p')
								p.appendChild(document.createTextNode(desc[k].replace(/tag:[\s]+/,'').replace(' ',' \u00A0\u00A0\u00A0 ')))
								descList.appendChild(p)
								}
							descList.appendChild(figcap)
							fig.appendChild(descList)
							}
						
						div.appendChild(fig)
						}
					}
				
				labelSection.appendChild(div)
				// Add the label header to the DOM
				//document.getElementById("rawdata").appendChild(labelSection)
				document.getElementById("rawdata").replaceChild(labelSection, document.getElementById("rawdata").firstChild)
				document.getElementById('total').textContent = "There are "+issues.length+" items."
			}

				
</script>
<script>window.onload = getAllData()</script>

<footer id="thefooter"></footer>
<script type="text/javascript">document.getElementById('thefooter').innerHTML = g.bottomOfPage</script> 
<script type="text/javascript">completePage()</script>

</div>
</body>
</html>
